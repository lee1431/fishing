<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>창업 아이디어 정리</title>  
  <script src="https://www.goat1000.com/tagcanvas.min.js"></script>
  <style>
    body { background: #fdfdfd; text-align: center; font-family: 'Pretendard', sans-serif; background: url('./think.png') no-repeat center center fixed; background-size: cover; }
    canvas { 
      margin-top: 40px;
      font-family: "Segoe UI Emoji", "Apple Color Emoji", sans-serif;
    }
    a.emoji-link {
      text-decoration: none;
      color: inherit;
    }
  </style>
</head>
<body>

  <h2><a href="./wup.html" class="emoji-link" target="_blank">🧠</a> 돌아가는 창업 아이템 목록</h2>

  <canvas width="1400" height="800" id="myCanvas">
    <p>태그캔버스를 지원하지 않는 브라우저입니다.</p>
  </canvas>

  <div id="tags" style="display:none;">
    <ul id="tagList">
      <!-- JS로 아이템 추가됨 -->
    </ul>
  </div>

<script>
  function fromBase64Unicode(str) {
    return decodeURIComponent(escape(atob(str)));
  }

  async function loadIdeas() {
    const v = "ghp_wMfZAjhSdjNnTIEb";
    const vv = "ozXeIpzsoYyBIA1LS55U";

    try {
      const res = await fetch(`https://api.github.com/repos/lee1431/fishing/contents/idea.json`, {
        headers: {
          Authorization: `Bearer ${v}${vv}`,
          Accept: "application/vnd.github.v3+json"
        }
      });

      const fileData = await res.json();
      const decodedContent = fromBase64Unicode(fileData.content);
      const json = JSON.parse(decodedContent);

      const ul = document.getElementById('tagList');
      json.ideas.forEach(text => {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = "#";
        a.textContent = text;
        li.appendChild(a);
        ul.appendChild(li);
      });

      // 태그캔버스 시작
      TagCanvas.Start('myCanvas', 'tags', {
        textColour: '#333',
        outlineColour: '#aaa',
        reverse: true,
        depth: 1.0,
        maxSpeed: 0.08,
        initial: [0.02, -0.03],
        shadow: '#999',
        shadowBlur: 3,
        zoom: 1.2,
        weight: false,
        freezeActive: false,
        dragControl: false,
        textFont: 'Pretendard, sans-serif'
      });

    } catch (e) {
      console.error("🔥 JSON 불러오기 실패:", e);
    }
  }

  window.onload = loadIdeas;
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í•œ ì¤„ ì•„ì´ë””ì–´ GitHub í‘¸ì‹œ ë°ëª¨</title>
	<link rel="icon" href="https://mrdindoin.ddns.net/ingo/images/favicon.ico?r=wof01">
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      padding: 2rem;
      background: #f9f9f9;
      max-width: 800px;
      margin: auto;
    }
    input {
      padding: 1rem;
      font-size: 1.2rem;
      width: 100%;
      margin-bottom: 1rem;
    }
    .emoji-box {
      margin-top: 2rem;
      background: #fff;
      padding: 1rem;
      border-radius: 1rem;
      box-shadow: 0 0 10px rgba(0,0,0,0.05);
    }
    .emoji-box strong {
      display: block;
      margin-bottom: 0.5rem;
    }
    .emoji-list span {
      cursor: pointer;
      font-size: 24px;
      margin: 0.3rem;
      transition: transform 0.2s;
    }
    .emoji-list span:hover {
      transform: scale(1.3);
    }
  </style>
</head>
<body>
  <h2>ğŸ’¡ í•œ ì¤„ ì•„ì´ë””ì–´ GitHub í‘¸ì‹œ</h2>
  <p>ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•˜ê³  í† í°ê³¼ ì €ì¥ì†Œ ì •ë³´ë¥¼ ì±„ìš´ í›„, GitHubë¡œ ì¦‰ì‹œ í‘¸ì‹œí•©ë‹ˆë‹¤.</p>

  <input type="text" id="ideaInput" placeholder="ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">

  <button onclick="pushIdeaToGitHub()">ğŸš€ ì•„ì´ë””ì–´ í‘¸ì‹œ</button>
  <div id="status"></div>


<div class="emoji-box">
    <strong>ğŸ§  ì´ëª¨ì§€ë¥¼ í´ë¦­í•˜ë©´ ì…ë ¥ì°½ì— ìë™ ì‚½ì…ë©ë‹ˆë‹¤ ğŸ‘‡</strong>
    <div class="emoji-list" id="emojiList">
      ğŸ§  ğŸ’¡ ğŸ› ï¸ ğŸ“ˆ ğŸš€ ğŸ§ª ğŸ”§ ğŸ—‚ï¸ ğŸ§¬<br/>
      ğŸŸ ğŸ£ ğŸ  ğŸ¤ ğŸ™ ğŸš ğŸ¦ ğŸ½ï¸ ğŸ§‚ ğŸ«’ ğŸ¶ ğŸ§Š<br/>
      ğŸ“¦ ğŸ“¬ ğŸ§Š ğŸšš ğŸ“« ğŸ§³ ğŸ“¦â€ğŸ“¦ ğŸ“® ğŸ›ï¸<br/>
      â˜• ğŸ§ƒ ğŸ¹ ğŸ¥¤ ğŸ¥ ğŸ¥¯ ğŸ§‡ ğŸ ğŸ°<br/>
      ğŸ ğŸ§¸ ğŸ’¼ ğŸ›’ ğŸ§µ ğŸ§© ğŸˆ ğŸª†<br/>
      ğŸ‘• ğŸ‘– ğŸ§¢ ğŸ‘— ğŸ§¥ ğŸ‘  ğŸ§¤ ğŸ‘“ ğŸ½<br/>
      ğŸŒ¿ ğŸ§„ ğŸ§… ğŸ§ˆ ğŸ§‚ ğŸ– ğŸ”¥ ğŸ¥© ğŸ³<br/>
      ğŸ£ â›º ğŸŒŠ ğŸï¸ ğŸŒ„ ğŸ¾ ğŸŒ¿ ğŸ¢<br/>
      ğŸ“¸ ğŸ’¬ ğŸ“ ğŸ—“ï¸ ğŸ“– ğŸ§· ğŸ”– ğŸï¸ ğŸ¨ ğŸ“<br/>
      âœ¨ ğŸ’¥ ğŸŒˆ ğŸŒ€ ğŸ›¸ ğŸ‘€ ğŸ•¹ï¸ ğŸ² ğŸ¤¯ ğŸ‰ ğŸ¯ ğŸ§ƒ ğŸŒ ğŸ’£ ğŸ’« ğŸ•Šï¸ ğŸ¤–
    </div>
  </div>


	
  <script>
    async function pushIdeaToGitHub() {
      const ideaText = document.getElementById('ideaInput').value.trim();          
      const statusEl = document.getElementById('status');

      if (!ideaText) {
        statusEl.innerText = 'âš ï¸ ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
        statusEl.style.color = 'red';
        return;
      }

      statusEl.innerText = 'â³ ê¸°ì¡´ íŒŒì¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...';
      statusEl.style.color = 'black';
		var v = "ghp_wMfZAjhSdjNnTIEb";
		var vv = "ozXeIpzsoYyBIA1LS55U";
      try {
        const res = await fetch(`https://api.github.com/repos/lee1431/fishing/contents/idea.json`, {
          headers: {
            Authorization: `Bearer ${v}${vv}`,
            Accept: "application/vnd.github.v3+json"
          }
        });
        const fileData = await res.json();
        const decodedContent = fromBase64Unicode(fileData.content);
        const json = JSON.parse(decodedContent);

        json.ideas.push(ideaText);
        const updatedContent = toBase64Unicode(JSON.stringify(json, null, 2));

        statusEl.innerText = 'ğŸ“¤ GitHubì— í‘¸ì‹œ ì¤‘...';

        const putRes = await fetch(`https://api.github.com/repos/lee1431/fishing/contents/idea.json`, {
          method: "PUT",
          headers: {
            Authorization: `Bearer ${v}${vv}`,
            Accept: "application/vnd.github.v3+json"
          },
          body: JSON.stringify({
            message: `ì•„ì´ë””ì–´ ì¶”ê°€: ${ideaText}`,
            content: updatedContent,
            sha: fileData.sha
          })
        });

        if (putRes.ok) {
          statusEl.innerText = 'âœ… ì•„ì´ë””ì–´ê°€ ì„±ê³µì ìœ¼ë¡œ í‘¸ì‹œë˜ì—ˆìŠµë‹ˆë‹¤!';
          statusEl.style.color = 'green';
        } else {
          const error = await putRes.json();
          throw new Error(error.message);
        }

      } catch (e) {
        statusEl.innerText = 'âŒ ì˜¤ë¥˜ ë°œìƒ: ' + e.message;
        statusEl.style.color = 'red';
      }
    }
	
	function toBase64Unicode(str) {
	  return btoa(unescape(encodeURIComponent(str)));
	}
	
	function fromBase64Unicode(str) {
	  return decodeURIComponent(escape(atob(str)));
	}


	const emojiList = document.getElementById('emojiList');
	const input = document.getElementById('ideaInput');
	
	emojiList.querySelectorAll('span, br').forEach(el => el.remove());
	
	const emojis = emojiList.innerHTML.replace(/<br\/>/g, ' ').split(/\s+/);
	emojiList.innerHTML = '';
	
	emojis.forEach(emoji => {
		const span = document.createElement('span');
		span.textContent = emoji;
		span.onclick = () => {
		input.value = emoji + ' ' + input.value;
		input.focus();
	};
	emojiList.appendChild(span);
	});
  </script>
</body>
</html>

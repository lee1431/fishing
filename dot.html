<!doctype html>
<html lang="ko">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>ğŸ”¥ ë¶ˆíƒ€ëŠ” ì†Œê¿‰ë†€ì´ Â· DOT MODE</title>
  <link rel="icon" href="https://mrdindoin.ddns.net/ingo/images/favicon.ico?r=wof01">
<style>
  /* ----- ê¸°ë³¸ ë ˆíŠ¸ë¡œ ë£© ----- */
  :root {
    /* 4ìƒ‰ íŒ”ë ˆíŠ¸ ëŠë‚Œ */
    --bg:#0d0d0d; --fg:#e5f4d3; --a:#9ae66e; --b:#4fb477; --accent:#ffdd33;
  }
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--fg);
    font-family: "Chicago","Monaco","Courier New",monospace;
    letter-spacing:.5px;
  }
  .wrap{max-width:720px;margin:0 auto;padding:12px 16px;position:relative}

  /* ìƒë‹¨ ë°” */
  header{display:block;border:2px solid var(--a);padding:8px;margin:8px 0;background:#000}
  h1{margin:0;font-size:20px}
  .blink{animation:blink 1s steps(1) infinite}
  @keyframes blink{50%{opacity:0}}

  /* ë²„íŠ¼ & ë§í¬ */
  a,button{color:var(--bg);background:var(--a);border:2px solid var(--b);padding:6px 10px;
    text-decoration:none;display:inline-block;cursor:pointer}
  a:hover,button:hover{filter:brightness(1.1)}
  .ghost{background:transparent;color:var(--a)}
  .badge{display:inline-block;border:1px solid var(--a);color:var(--a);padding:2px 6px;margin-right:6px}

  /* ë°•ìŠ¤ */
  .panel{border:2px solid var(--a);padding:10px;margin:10px 0;background:#000}

  /* ìŠ¤ìº”ë¼ì¸(ë„ê³  ì¼¤ ìˆ˜ ìˆê²Œ) */
  .scanlines:before{
    content:""; pointer-events:none; position:fixed; inset:0; z-index:999;
    background: repeating-linear-gradient(
      to bottom, rgba(255,255,255,.06), rgba(255,255,255,.06) 1px,
      rgba(0,0,0,0) 1px, rgba(0,0,0,0) 3px
    );
    mix-blend-mode: overlay;
  }

  /* í”½ì…€ ì´ë¯¸ì§€ ë§¤ëˆí•´ì§ ë°©ì§€ (êµ¬í˜• ì‚¬íŒŒë¦¬ëŠ” ì™„ë²½ ì§€ì› X â†’ ìº”ë²„ìŠ¤ ë°©ì‹ìœ¼ë¡œ ë³´ì™„) */
  .pixelated {
    image-rendering: pixelated;         /* ìµœì‹  */
    image-rendering: -moz-crisp-edges;  /* FF */
    image-rendering: crisp-edges;       /* í‘œì¤€ */
    -ms-interpolation-mode: nearest-neighbor; /* IE */
  }

  /* D-Pad */
  .pad {display:inline-grid;grid-template-columns:40px 40px 40px;grid-template-rows:40px 40px 40px;gap:6px}
  .pad button{width:40px;height:40px;text-align:center;padding:0;font-weight:bold}

  /* ë§ˆí€´(ì¶”ì–µìš©) */
  marquee{border:1px dashed var(--a); padding:6px; color:var(--accent); background:#111}
</style>

<body class="scanlines">
<div class="wrap">
  <header>
    <div class="badge">DOT 1.0</div>
    <div class="badge">ES5 ONLY</div>
    <div class="badge">iPhone 4 OK</div>
    <h1>ğŸ”¥ ë¶ˆíƒ€ëŠ” ì†Œê¿‰ë†€ì´ <span class="blink">_</span></h1>
  </header>

  <marquee behavior="scroll" direction="left" scrollamount="4">
    âŒ› ë„íŠ¸ ì„¸ìƒì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì¢Œìš°ë¡œ ì›€ì§ì—¬ë³´ì„¸ìš”! âŒ›
  </marquee>

  <div class="panel">
    <h2 style="margin:0 0 8px">í”½ì…€ ìº”ë²„ìŠ¤ ë°ëª¨</h2>
    <canvas id="screen" width="128" height="128" style="border:2px solid var(--a);background:#001a0c;"></canvas>
    <div style="margin-top:8px">
      <div class="pad">
        <span></span><button id="up">â–²</button><span></span>
        <button id="left">â—€</button><button id="toggle">â– </button><button id="right">â–¶</button>
        <span></span><button id="down">â–¼</button><span></span>
      </div>
      <button class="ghost" id="scan">SCANLINES ON/OFF</button>
    </div>
    <p style="margin:8px 0 0;font-size:12px;opacity:.8">
      * ë„íŠ¸ ì„ ëª…ë„ëŠ” <b>ìº”ë²„ìŠ¤ì˜ ìµœê·¼ì ‘ ë³´ê°„</b>ìœ¼ë¡œ ë³´ì¥í•©ë‹ˆë‹¤(êµ¬í˜• iOS ì‚¬íŒŒë¦¬ í˜¸í™˜).
    </p>
  </div>

  <div class="panel">
    <h2 style="margin:0 0 8px">ë‹¤ìš´ë¡œë“œ ì¡´</h2>
    <p style="margin:0 0 8px">ì„œë²„ê°€ <code>Content-Disposition: attachment</code> í—¤ë”ë¥¼ ë„£ë„ë¡ ì„¤ì •í•´ë‘ë©´,
      ì•„ë˜ ë§í¬ëŠ” ì•„ì´í°4ì—ì„œë„ ì €ì¥/ì—´ê¸°ê°€ ë– ìš”.</p>
    <a href="/sample.zip">sample.zip</a>
    <a class="ghost" href="#" id="tip">TIP ë³´ê¸°</a>
    <div id="tipBox" style="display:none;margin-top:8px;font-size:12px;opacity:.9">
      Nginx ì˜ˆì‹œ<br>
      <code>location ~* \.(zip|pdf|png)$ { types { } default_type application/octet-stream; add_header Content-Disposition "attachment"; }</code>
    </div>
  </div>

  <div class="panel">
    <h2 style="margin:0 0 8px">ê²ŒìŠ¤íŠ¸ë¶ (ë¡œì»¬ ì €ì¥)</h2>
    <form onsubmit="return addMsg();">
      <input id="nick" maxlength="12" placeholder="ë‹‰ë„¤ì„">
      <input id="msg" maxlength="60" placeholder="í•œë§ˆë””">
      <button type="submit">ê¸°ë¡</button>
      <button type="button" class="ghost" id="clear">ì§€ìš°ê¸°</button>
    </form>
    <ul id="list" style="list-style:none;padding-left:0;margin:8px 0"></ul>
  </div>
</div>

<script>
/* =========================
   1) ë„íŠ¸ ìº”ë²„ìŠ¤ (ES5 ì „ìš©)
   ========================= */
(function(){
  var cv = document.getElementById('screen');
  var ctx = cv.getContext('2d');

  // í™”ë©´ í™•ëŒ€(Nearest Neighbor) â€” CSS í™•ëŒ€ ì‹œ iOS7ê°€ íë ¤ì§ˆ ìˆ˜ ìˆì–´,
  // JSë¡œ í™•ëŒ€ ë²„í¼ë¥¼ ê·¸ë ¤ ë„£ëŠ” ë°©ì‹ì„ ì‚¬ìš©.
  var SCALE = 4; // ë‚´ë¶€ í”½ì…€ 1 â†’ í™”ë©´ 4ë°°
  var W = 32, H = 32; // ë‚´ë¶€ ê·¸ë¦¬ë“œ
  var buf = document.createElement('canvas');
  buf.width = W; buf.height = H;
  var bctx = buf.getContext('2d');

  // ë³´ê°„ ë„ê¸°
  ctx.imageSmoothingEnabled = false;
  bctx.imageSmoothingEnabled = false;

  // ê°„ë‹¨ ìŠ¤í”„ë¼ì´íŠ¸(í•˜íŠ¸) 8x8
  var heart = [
    "01100110",
    "11111111",
    "11111111",
    "11111111",
    "01111110",
    "00111100",
    "00011000",
    "00000000"
  ];
  // íŒ”ë ˆíŠ¸
  var colBg = "#001a0c", col1 = "#9ae66e", col2 = "#4fb477";

  var px = 12, py = 12; // ìœ„ì¹˜
  var showBox = true;

  function clear(g){ g.fillStyle = colBg; g.fillRect(0,0,W,H); }

  function drawSprite(g, sx, sy){
    var x,y;
    for (y=0;y<heart.length;y++){
      for (x=0;x<heart[y].length;x++){
        if (heart[y].charAt(x)==='1'){
          g.fillStyle = (x+y)%2===0 ? col1 : col2;
          g.fillRect(sx+x, sy+y, 1, 1);
        }
      }
    }
  }
  function draw(){
    clear(bctx);
    if (showBox) {
      // í…Œë‘ë¦¬ ìƒì
      bctx.strokeStyle = col2;
      bctx.strokeRect(1,1,W-2,H-2);
    }
    drawSprite(bctx, px, py);

    // ë²„í¼â†’ì‹¤í™”ë©´ì— ìµœê·¼ì ‘ í™•ëŒ€
    ctx.clearRect(0,0,cv.width,cv.height);
    ctx.drawImage(buf, 0, 0, W, H, 0, 0, W*SCALE, H*SCALE);
  }
  draw();

  // ì»¨íŠ¸ë¡¤ëŸ¬
  function clamp(v,min,max){ return v<min?min:(v>max?max:v); }
  function move(dx,dy){
    px = clamp(px+dx, 0, W-8);
    py = clamp(py+dy, 0, H-8);
    draw();
  }
  document.getElementById('up').onclick    = function(){ move(0,-1); };
  document.getElementById('down').onclick  = function(){ move(0, 1); };
  document.getElementById('left').onclick  = function(){ move(-1,0); };
  document.getElementById('right').onclick = function(){ move( 1,0); };
  document.getElementById('toggle').onclick= function(){ showBox=!showBox; draw(); };

  // ìŠ¤ìº”ë¼ì¸ í† ê¸€
  document.getElementById('scan').onclick = function(){
    var b = document.body;
    if ((' '+b.className+' ').indexOf(' scanlines ')>-1){
      b.className = b.className.replace('scanlines','').replace(/\s+/g,' ').replace(/^\s+|\s+$/g,'');
    } else {
      b.className += ' scanlines';
    }
  };
})();

/* =========================
   2) ê°„ì´ ê²ŒìŠ¤íŠ¸ë¶(ë¡œì»¬ìŠ¤í† ë¦¬ì§€)
   ========================= */
(function(){
  var key='dot_guest_v1';
  var $list = document.getElementById('list');
  function load(){
    try{var s=localStorage.getItem(key); return s?JSON.parse(s):[];}catch(e){return [];}
  }
  function save(arr){
    try{localStorage.setItem(key, JSON.stringify(arr));}catch(e){}
  }
  function render(arr){
    $list.innerHTML='';
    for (var i=0;i<arr.length;i++){
      var li=document.createElement('li');
      li.style.border='1px solid #4fb477';
      li.style.padding='4px 6px'; li.style.margin='6px 0'; li.style.background='#000';
      li.appendChild(document.createTextNode('['+arr[i].t+'] '+arr[i].n+': '+arr[i].m));
      $list.appendChild(li);
    }
  }
  window.addMsg=function(){
    var n=document.getElementById('nick').value||'anon';
    var m=document.getElementById('msg').value||'';
    if(!m){return false;}
    var arr=load();
    arr.unshift({n:n,m:m,t:(new Date()).toLocaleString()});
    arr=arr.slice(0,50); save(arr); render(arr);
    document.getElementById('msg').value='';
    return false;
  };
  document.getElementById('clear').onclick=function(){ save([]); render([]); };
  render(load());
})();

/* =========================
   3) íŒ í† ê¸€
   ========================= */
(function(){
  var tip=document.getElementById('tip'), box=document.getElementById('tipBox');
  tip.onclick=function(e){ e.preventDefault ? e.preventDefault() : (e.returnValue=false);
    box.style.display = box.style.display==='none' ? 'block' : 'none';
  };
})();
</script>
</body>
</html>
